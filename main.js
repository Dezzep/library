(()=>{const e=document.getElementById("show-form"),t=document.getElementById("forms-container");let n=[],d=[];class o{constructor(e,t,n,d){this.title=e,this.author=t,this.pages=n,this.wasRead=d,!1===this.wasRead?this.wasRead="Not read yet":this.wasRead="Finished Reading"}}const a=document.forms["book-form"];a.addEventListener("submit",(function(e){e.preventDefault();let l=document.getElementById("book-title").value,s=document.getElementById("author").value,r=document.getElementById("pages").value,c=!0;for(i in document.getElementById("notfinished").checked&&(c=!1),(e=>{for(;e.lastChild;)e.removeChild(e.lastChild)})(document.getElementById("container")),d.sort().reverse(),d)n.splice(d[i],1);d=[],a.style.display="none",a.style.display="block",n.push(book=new o(l,s,r,c)),function(e){for(i in e){const t=document.createElement("div"),n=document.createElement("p"),d=document.createElement("p"),o=document.createElement("p"),a=document.createElement("button"),l=document.createElement("button");l.textContent="Delete",l.id=[i],a.id=[i];const s=document.createTextNode(`Book Title: ${e[i].title}`),r=document.createTextNode(`Author: ${e[i].author}`),c=document.createTextNode(`Pages: ${e[i].pages}`),u=document.createTextNode(`${e[i].wasRead}`);n.appendChild(s),d.appendChild(r),o.appendChild(c),a.appendChild(u),"Finished Reading"===e[i].wasRead?a.style.background="#008B74":a.style.background="red",t.style.background="#FFC75F",t.setAttribute("class","cards"),t.id=`book${i}`,document.getElementById("container").appendChild(t),document.getElementById(`book${i}`).appendChild(n),document.getElementById(`book${i}`).appendChild(d),document.getElementById(`book${i}`).appendChild(o),document.getElementById(`book${i}`).appendChild(a),a.setAttribute("class","read-status"),document.getElementById(`book${i}`).appendChild(l),l.setAttribute("class","delete-button")}document.querySelectorAll("#container .cards >.delete-button").forEach((e=>e.onclick=e=>{var t;t=e.target.id,d.push(t),e.target.parentElement.remove()})),document.querySelectorAll("#container .cards >.read-status").forEach((t=>t.onclick=t=>{let n=t.target.id;"Finished Reading"===e[n].wasRead?(e[n].wasRead="Not read yet",t.target.style.background="red",t.target.innerText="Not read yet"):(e[n].wasRead="Finished Reading",t.target.style.background="#008B74",t.target.innerText="Finished Reading")}))}(n),a.reset(),t.style.display="none"})),e.addEventListener("click",(function(){"none"===t.style.display?(t.style.display="block",document.getElementById("book-title").focus()):t.style.display="none"}));const l=document.getElementsByTagName("form")[0],s=document.getElementById("author"),r=document.querySelector("#author + span.error");function c(){s.validity.valueMissing?r.textContent="You need to enter an e-mail address.":s.validity.typeMismatch?r.textContent="Entered value needs to be an e-mail address.":s.validity.tooShort&&(r.textContent=`Email should be at least ${s.minLength} characters; you entered ${s.value.length}.`),r.className="error active"}s.addEventListener("input",(function(e){s.validity.valid?(r.textContent="",r.className="error"):c()})),l.addEventListener("submit",(function(e){s.validity.valid||(c(),e.preventDefault())}))})();